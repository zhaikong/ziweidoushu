# ☁️ 紫微斗数系统 - 云端零成本部署指南

本指南将帮助您使用 **Vercel (前端)** + **Railway (后端)** 的组合，免费且稳定地部署您的系统。

## 准备工作
1.  即刻注册 [GitHub](https://github.com/) 账号（如果还没有）。
2.  将您的代码上传到 GitHub 仓库（如果您还没做，请使用 GitHub Desktop 或命令行上传）。

---

## 第一阶段：部署后端 (Railway)
*目标：把 Node.js 服务器跑起来，获得一个 https://xxx.railway.app 的网址。*

1.  访问 [Railway.app](https://railway.app/) 并使用 GitHub 登录。
2.  点击 **"New Project"** -> **"Deploy from GitHub repo"**。
3.  选择您的 `sm大师` 仓库。
4.  在配置界面添加环境变量（Variables）：
    *   `GEMINI_API_KEY`: 填入您的 `AIzaSy...` 密钥
    *   `PORT`: `3000`
5.  点击 **"Deploy"**。
6.  部署成功后，点击项目卡片，找到 **"Settings"** -> **"Domains"**，点击 **"Generate Domain"**。
    *   👉 **记下这个网址**（例如：`https://sm-master-production.up.railway.app`），这就是您的【后端地址】。

---

## 第二阶段：部署前端 (Vercel)
*目标：部署 HTML/CSS/JS 页面，并连接到后端。*

1.  访问 [Vercel.com](https://vercel.com/) 并使用 GitHub 登录。
2.  点击 **"Add New..."** -> **"Project"**。
3.  导入您的 `sm大师` 仓库。
4.  在 **"Framework Preset"** 中选择 **"Other"**。
5.  **🔴 关键步骤：配置 API 转发**
    *   在项目设置中无法直接修改 `vercel.json`，我们需要在代码里改一下。
    *   打开本地电脑上的 `vercel.json` 文件。
    *   将 `"dest": "SERVER_URL/api/$1"` 中的 `SERVER_URL` 替换为您刚才在 Railway 生成的【后端地址】。
    *   *例如：`"dest": "https://sm-master-production.up.railway.app/api/$1"`*
    *   保存文件，并推送到 GitHub。
6.  回到 Vercel，它会自动检测到代码更新并重新部署。
7.  部署完成后，Vercel 会给您分发一个域名（例如 `sm-master.vercel.app`）。

---

## 🎉 完成！
访问您的 Vercel 域名，您的紫微斗数系统现在已经：
*   ✅ 全球皆可访问
*   ✅ 免翻墙使用 Gemini API
*   ✅ 永久免费
